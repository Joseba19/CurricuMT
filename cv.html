<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sube tu CV</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/navbar.css">
    <link rel="stylesheet" href="styles/cv.css">
    <link rel="stylesheet" href="styles/base.css">
</head>

<body>

    <ul class="navbar">
         <div class="links">
            <li><a href="index.html" class="paginas">Inicio</a></li>
            <li><a href="ofertas.html" class="paginas">Ofertas de Trabajo</a></li>
            <li><a href="cv.html" class="paginas">Sube tu CV</a></li>
            <li><a href="empresas.html" class="paginas">Empresas</a></li>
            <li><a href="InicioSesion.html" class="paginas">Administradores</a></li>
        </div>
        <div class="logo">
            <li><a href="index.html"><img src="resources/logoPositivo.png" alt=""
                        style="height:50px; vertical-align:middle;"></a></li>
        </div>
    </ul>

    <div class="container">

        <h1>Sube tu CV</h1> <br>

        <form id="contact-form" method="post" class="formCV">
            <div class="formulario">

                <label>Nombre completo *</label>
                <input class="form-control" type="text" id="nombre" name="nombre" placeholder="Nombre Apellido"
                    required> <br>

                <label>Edad *</label>
                <input class="form-control" type="number" id="edad" name="edad" min="18" max="60" value="20" required>
                <br>

                <label>Correo electronico *</label>
                <input class="form-control" type="email" id="email" name="email" placeholder="correo@gmail.com"
                    required> <br>

                <label>Teléfono</label>
                <input class="form-control" type="tel" id="telefono" name="telefono" maxlength="9" pattern="[0-9]{9}">
                <br>

                <label>Experiencia laboral *</label>
                <textarea name="experiencia" id="experiencia" class="form-control" required></textarea> <br>

                <label>Estudios *</label>
                <fieldset>
                    <div class="estudios">
                        <p>FP:</p>
                        <input type="checkbox" id="curso1" name="estudios"
                            value="Tecnico en sistemas Microinformáticos y Redes">
                        <label for="curso1">Tecnico en sistemas Microinformáticos y Redes</label><br>
                        <input type="checkbox" id="curso2" name="estudios" value="Multiplataforma (DAM)">
                        <label for="curso2">Multiplataforma (DAM)</label><br>
                        <input type="checkbox" id="curso3" name="estudios" value="Desarrollo de Aplicaciones Web (DAW)">
                        <label for="curso3">Desarrollo de Aplicaciones Web (DAW)</label><br>
                        <input type="checkbox" id="curso4" name="estudios"
                            value="Administración de sistemas informáticos en red (ASIR)">
                        <label for="curso4">Administración de sistemas informáticos en red (ASIR)</label><br>

                        <p>Especializaciones:</p>
                        <input type="checkbox" id="curso5" name="estudios"
                            value="Ciberseguridad en entornos de las tecnologias de la información">
                        <label for="curso5">Ciberseguridad en entornos de las tecnologias de la información</label><br>
                        <input type="checkbox" id="curso6" name="estudios"
                            value="Desarrollo de aplicaciones en lenguaje python">
                        <label for="curso6">Desarrollo de aplicaciones en lenguaje python</label><br>
                        <input type="checkbox" id="curso7" name="estudios"
                            value="Desarrollo de videojuegos y realidad virtual">
                        <label for="curso7">Desarrollo de videojuegos y realidad virtual</label><br>
                        <input type="checkbox" id="curso8" name="estudios" value="Inteligencia artificial y Big data">
                        <label for="curso8">Inteligencia artificial y Big data</label><br>
                    </div>
                </fieldset> <br> <br>

                <label for="fileUpload">Sube aqui tu CV (PDF) *</label>
                <div class="CV">
                    <input type="file" id="fileUpload" name="cv_file" accept=".pdf" required>
                    <div id="fileInfo" class="file-info"></div>
                </div> <br>

                <button type="submit">Enviar CV</button>
                <div id="statusMessage" style="margin-top: 15px;"></div>
            </div>
        </form>
    </div>

    <footer>
        © 2025 CurricuMT
    </footer>

    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

    <script type="text/javascript">
        // Inicializar EmailJS
        (function () {
            emailjs.init({
                publicKey: "NodgzyWRmUnC0y1qD",
            });
        })();

        // Selección de archivo
        document.getElementById('fileUpload').addEventListener('change', function () {
            const file = this.files[0];
            const fileInfo = document.getElementById('fileInfo');

            if (file) {
                // Verificar si es PDF
                if (file.type !== 'application/pdf') {
                    alert('Por favor, sube solo archivos PDF');
                    this.value = '';
                    fileInfo.innerHTML = '';
                    return;
                }

                // Mostrar información del archivo
                fileInfo.innerHTML = `
                <div style="background:#e8f5e8; border:1px solid #4caf50; color:#2e7d32; padding:10px; border-radius:6px; margin-top:10px;">
                    <strong>Archivo seleccionado:</strong> ${file.name}<br>
                    <strong>Tamaño:</strong> ${Math.round(file.size / 1024)} MB
                </div>
            `;
            } else {
                fileInfo.innerHTML = '';
            }
        });

        // Manejo del envío del formulario
        window.onload = function () {
            document.getElementById('contact-form').addEventListener('submit', function (event) {
                event.preventDefault();

                const statusMessage = document.getElementById('statusMessage');
                const submitButton = event.target.querySelector('button[type="submit"]');

                // Crear objeto con los datos del formulario
                const templateParams = {
                    nombre: document.getElementById('nombre').value,
                    edad: document.getElementById('edad').value,
                    email: document.getElementById('email').value,
                    telefono: document.getElementById('telefono').value || 'No proporcionado',
                    experiencia: document.getElementById('experiencia').value,
                };

                // Enviar email con EmailJS
                emailjs.send('service_d082kj1', 'template_s51oa1w', templateParams)
                    .then(() => {
                        console.log('SUCCESS!');
                        statusMessage.innerHTML = '<p style="color: #4caf50; font-weight: 500;">✓ ¡CV enviado correctamente! Recibirás un email de confirmación.</p>';
                        document.getElementById('contact-form').reset();
                        document.getElementById('fileInfo').innerHTML = '';
                        submitButton.disabled = false;
                        submitButton.textContent = 'Enviar CV';
                    })
                    .catch((error) => {
                        console.log('FAILED...', error);
                        statusMessage.innerHTML = '<p style="color: #f44336; font-weight: 500;">✗ Error al enviar el CV. Por favor, inténtalo de nuevo.</p>';
                        submitButton.disabled = false;
                        submitButton.textContent = 'Enviar CV';
                    });
            });
        }
    </script>

</body>

</html>